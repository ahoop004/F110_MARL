meta:
  name: gaplock_ftg_baseline

scenario:
  env:
    # map: Shanghai_map
    map: Budapest_map
    # map: line2
    seed: 42
    max_steps: 25000
    lidar_beams: 720
    lidar_dist: 0.103
    terminate_on_any_done: true
    vehicle_params:
      v_max: 1.0
      v_min: -1.0
      length: 0.32
      width: 0.225
      s_min: -0.46
      s_max: 0.46
    # spawn_points:
    #   - spawn_1
    spawn_points:
      - spawn_9

  main:
    mode: eval
    eval_episodes: 25
    save_eval_rollouts: false
    eval_rollout_dir: eval_rollouts
    wandb:
      enabled: false

  agents:
    car_0:
      trainable: false
      algorithm:
        name: follow_gap
        params:
          max_distance: 10.0
          window_size: 2
          bubble_radius: 1
          max_steer: 0.4
          min_speed: 0.2
          max_speed: 0.8
          steering_gain: 0.45
          fov_deg: 240
          # normalized: true
          steer_smooth: 0.35
          center_bias_gain: 0.2
          inside_bias_gain: 0.8
          crawl_steer_ratio: 0.4
          steering_speed_scale: 1.0
          preview_horizon: 2.0
          preview_samples: 9
          dwa_samples: 5
          dwa_horizon: 0.8
          dwa_heading_weight: 0.2
          enhanced_gap_scoring: true
          gap_score_width_weight: 1.0
          gap_score_clearance_weight: 1.5
          gap_score_center_weight: 0.7
          gap_score_curvature_weight: 0.3
          u_shape_enabled: true
          u_shape_threshold: 0.35
          u_shape_crawl_speed: 0.3
      wrappers:
        - factory: obs
          params:
            max_scan: 10.0
            normalize: true
            components:
              - id: lidar
                type: lidar
                params:
                  beams: 720
                  max_range: 8.0
                  # normalize: true
                  # clip: 1.0
